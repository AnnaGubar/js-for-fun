<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scrolling Progress</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    />
    <style>
      body {
        padding: 30px;
        background-color: rgb(31, 30, 31);
        color: rgb(43, 59, 38);
      }
      .jumbotron {
        padding: 30px;
      }
      .content {
        background: #fff;
        padding: 50px;
        font-size: 19px;
        line-height: 1.5;
        min-height: 3000px;
      }

      .scroll-line {
        position: fixed;
        top: 0;
        left: 0;
        height: 8px;
        background: #1ce;
        transition: 0.5s cubic-bezier(0.075, 0.82, 0.165, 1) width;
      }
    </style>
  </head>
  <body>
    <div class="scroll-line"></div>

    <div class="container">
      <div class="content">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Officiis ex
        ducimus iusto harum, dignissimos aut temporibus facere eligendi debitis
        veniam, voluptatibus sunt distinctio animi at quam! Cumque minus labore
        ea?
      </div>
    </div>

    <!-- üî•üî•üî•üî• start javascript üî•üî•üî•üî• -->

    <script>
      const scrollLine = document.querySelector(".scroll-line");

      function fillScrollLine() {
        const windowHeigth = window.innerHeight; // –≤–∏–¥–∏–º–∞—è —á–∞—Å—Ç—å –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞
        const fullHeigth = document.body.clientHeight; // –≤—ã—Å–æ—Ç–∞ –≤—Å–µ–≥–æ –æ–∫–Ω–∞
        const scrolled = window.scrollY; // —Ç–æ—á–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫—Ä–æ–ª–ª–∞ –Ω–∞ –æ–∫–Ω–µ

        const percentScrolled = (scrolled / (fullHeigth - windowHeigth)) * 100;
        // —Å–∫—Ä–æ–ª–ª –æ–∫–Ω–∞ –æ—Ç 0 –¥–æ 1, –ø–æ—Å–ª–µ —É–º–Ω–æ–∂–µ–Ω–∏—è –æ—Ç 0 –¥–æ 100

        scrollLine.style.width = `${percentScrolled}%`;
      }

      window.addEventListener("scroll", debounce(fillScrollLine));

      // window.addEventListener(
      //   "scroll",
      //   debounce(function () {
      //     console.count("hello!");
      //   }, 20)
      // );

      // -------- –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ debounce –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ loodash ---------

      function debounce(func, wait = 15, immediate) {
        var timeout;
        return function () {
          var context = this,
            args = arguments;
          var later = function () {
            timeout = null;
            if (!immediate) func.apply(context, args);
          };
          var callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
          if (callNow) func.apply(context, args);
        };
      }
    </script>
  </body>
</html>
